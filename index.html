<!DOCTYPE html>

<html lang="zh-cn">

<head>
    <meta charset="utf-8">
    <title>The Blog of good1210's</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js"></script>
    <link rel="stylesheet" href="init/main.css">
</head>


<style>
    @font-face {
    font-family: '楷体';
    src: url("init/simkai.ttf");
}
    @font-face {
        font-family: 'Consolas normal';
        src: url("init/consola.ttf");
    }
</style>

<body style="font-family: 'Consolas normal', '楷体';">
    <ul id="fileList"></ul>
    <h1 style="text-align: center; color:rgb(255, 255, 255)">博客：good1210</h1>
    <div class="good-box">
    <h2 style="text-align: center; color: black">个人简介</h2>
    <div class="text-card">
        我的洛谷账号：<a href="https://www.luogu.com.cn/user/1497153">good1210</a><br>
        我的QQ：3922191797
    </div></div><br>
    <div class="good-box">
    <h2 style="text-align: center; color:black">文章列表</h2>
    <div class="article-box" id="articleList">
        <!-- 文章卡片将通过JS动态生成 -->
        <div class="loading">加载文章中...</div>
    </div></div>
</body>

<script>
    let articles = [];

    // 初始化：加载所有文章信息
    async function init() {
      const articleListEl = document.getElementById('articleList');
      
      try {
        // 注意：GitHub Pages 无法直接列出文件夹，这里需要手动维护文章路径列表
        // 如果你有新文章，需要在这里添加日期文件夹名称
        const dateFolders = [
          '2025-10-22', 
          // 新增文章时添加新的日期文件夹
        ];

        // 遍历所有日期文件夹，读取文章信息
        for (const folder of dateFolders) {
          const infoUrl = `article/${folder}/info.json`;
          const response = await fetch(infoUrl);
          
          if (!response.ok) throw new Error(`无法加载 ${folder} 的信息`);
          
          const info = await response.json();
          // 补充日期信息（从文件夹名提取）
          articles.push({
            ...info,
            date: folder, // 日期格式：YYYY-MM-DD
            folder: folder // 用于跳转路径
          });
        }

        // 按日期倒序排序（最新的在前）
        articles.sort((a, b) => new Date(b.date) - new Date(a.date));

        // 渲染文章列表
        renderArticleList();

      } catch (error) {
        articleListEl.innerHTML = `<div class="error">加载失败：${error.message}</div>`;
        console.error('加载文章出错：', error);
      }
    }

    // 渲染文章卡片列表
    function renderArticleList() {
      const articleListEl = document.getElementById('articleList');
      articleListEl.innerHTML = '';

      if (articles.length === 0) {
        articleListEl.innerHTML = '<div>暂无文章</div>';
        return;
      }

      articles.forEach(article => {
        const card = document.createElement('div');
        card.className = 'article-card';
        // 点击卡片跳转到文章页，通过URL参数传递日期文件夹名
        card.onclick = () => {
          window.location.href = `article.html?folder=${article.folder}`;
        };

        card.innerHTML = `
          <h3 style="color: white">${article.title}</h3>
          <div style="color: white">总结：${article.excerpt}——${formatDate(article.date)}</div>
        `;

        articleListEl.appendChild(card);
      });
    }

    // 格式化日期（YYYY-MM-DD → 年月日）
    function formatDate(dateStr) {
      const date = new Date(dateStr);
      return `${date.getFullYear()}年${date.getMonth() + 1}月${date.getDate()}日`;
    }

    // 页面加载完成后初始化
    window.onload = init;
</script>

</html>